# توثيق قواعد البيانات - مشروع "طلبي" (Talabye)

يوضح هذا الملف هيكلية جداول قاعدة البيانات، أنواع البيانات، والعلاقات بين الجداول المختلفة في النظام.

---

## ١. جداول المستخدمين والوصول (Auth & Users)

### جدول `users`

يخزن بيانات العملاء الأساسية.

- `id`: المعرف الفريد.
- `name`: اسم المستخدم.
- `email`: البريد الإلكتروني (فريد).
- `phone`: رقم الهاتف (فريد).
- `country_code`: رمز الدولة (افتراضي: 967).
- `password`: كلمة المرور المشفرة.
- `device_token`: رمز الجهاز للإشعارات (FCM).
- `device_type`: نوع الجهاز (iOS/Android).

### جدول `otps`

لإدارة رموز التحقق.

- `identifier`: معرف المستخدم (رقم الهاتف أو البريد).
- `token`: رمز التحقق.
- `expires_at`: وقت انتهاء الصلاحية.
- `valid`: حالة الرمز (فعال/غير فعال).

---

## ٢. جداول المنتجات والمنصات (Products & Platforms)

### جدول `platforms`

يخزن بيانات المواقع العالمية المدعومة.

- `name`: اسم المنصة (مثل Amazon).
- `url`: رابط المنصة.
- `logo`: رابط شعار المنصة.
- `currency`: العملة الأساسية للمنصة.
- `currency_symbol`: رمز العملة.
- `script_file`: ملف الـ Javascript الخاص بجلب البيانات.
- `is_active`: حالة تفعيل المنصة في النظام.

### جدول `products`

المنتجات المسحوبة من المنصات.

- `name`: اسم المنتج.
- `image`: الصورة الرئيسية.
- `price`: السعر (بالدولار غالباً).
- `weight`: الوزن (بالجرام).
- `platform_id`: ربط مع جدول المنصات.
- `user_id`: المستخدم الذي قام بمعاينة/إضافة المنتج.

---

## ٣. جداول سلة التسوق (Shopping Carts)

### جدول `carts`

- `total`, `subtotal`, `tax`, `shipping`: تفاصيل الأسعار.
- `platform_id`: السلة مرتبطة بمنصة محددة.
- `user_id`: ربط مع المستخدم.
- `is_delivery_to_home`: خيار التوصيل للمنزل.

### جدول `cart_items`

- `cart_id`: ربط مع السلة.
- `product_id`: ربط مع المنتج.
- `quantity`: الكمية.
- `price`, `total`: السعر الفردي والإجمالي.

---

## ٤. جداول الطلبات (Orders Flow)

### جدول `checkout_orders`

يمثل عملية الدفع الكلية.

- `code`: رقم الطلب المرجعي.
- `status`: حالة الطلب (PENDING_PAYMENT, PAID, etc.).
- `grand_total`: المبلغ الإجمالي النهائي.
- `payment_method`: وسيلة الدفع.
- `address_id`: عنوان الشحن المرتبط.
- `user_id`: صاحب الطلب.

### جدول `orders`

تقسيم الطلب الرئيسي حسب المنصات.

- `checkout_order_id`: ربط مع الطلب الرئيسي.
- `platform_id`: المنصة التابع لها هذا الجزء من الطلب.
- `status`: حالة الطلب الخاص بالمنصة (PENDING, ORDERED, SHIPPED, etc.).

### جدول `order_items`

- `order_id`: ربط مع الطلب الفرعي.
- `product_id`: ربط مع المنتج.
- `quantity`, `price`, `total`: الكميات والأسعار.

---

## ٥. جداول العناوين والخدمات (Services & Others)

### جدول `addresses`

- `user_id`: ربط مع المستخدم.
- `address_one`: تفاصيل العنوان.
- `latitude`, `longitude`: الإحداثيات الجغرافية.

### جدول `currency_exchange_rates`

- `code`: رمز العملة (مثل TRY, EUR).
- `rate`: سعر الصرف مقابل الدولار.

### جدول `notifications`

- `user_id`: المستلم.
- `title`, `body`: محتوى التنبيه.
- `read`: حالة القراءة.

### جدول `pages`

- `title`, `slug`, `content`: لإدارة محتوى الصفحات الثابتة.

---

_هذا الملف يمثل مرجعاً تقنياً لهيكلية البيانات الحالية للمشروع._
